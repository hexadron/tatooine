/*
 Copyright (c) 2003-2012, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.html or http://ckeditor.com/license
*/
(function(){CKEDITOR.plugins.add("xml",{}),CKEDITOR.xml=function(e){var t=null;if("object"==typeof e)t=e;else if(e=(e||"").replace(/&nbsp;/g,"Â "),window.DOMParser)t=(new DOMParser).parseFromString(e,"text/xml");else if(window.ActiveXObject){try{t=new ActiveXObject("MSXML2.DOMDocument")}catch(n){try{t=new ActiveXObject("Microsoft.XmlDom")}catch(r){}}t&&(t.async=!1,t.resolveExternals=!1,t.validateOnParse=!1,t.loadXML(e))}this.baseXml=t},CKEDITOR.xml.prototype={selectSingleNode:function(e,t){var n=this.baseXml;if(t||(t=n)){if(CKEDITOR.env.ie||t.selectSingleNode)return t.selectSingleNode(e);if(n.evaluate)return(n=n.evaluate(e,t,null,9,null))&&n.singleNodeValue||null}return null},selectNodes:function(e,t){var n=this.baseXml,r=[];if(t||(t=n)){if(CKEDITOR.env.ie||t.selectNodes)return t.selectNodes(e);if(n.evaluate&&(n=n.evaluate(e,t,null,5,null)))for(var i;i=n.iterateNext();)r.push(i)}return r},getInnerXml:function(e,t){var n=this.selectSingleNode(e,t),r=[];if(n)for(n=n.firstChild;n;)n.xml?r.push(n.xml):window.XMLSerializer&&r.push((new XMLSerializer).serializeToString(n)),n=n.nextSibling;return r.length?r.join(""):null}}})();