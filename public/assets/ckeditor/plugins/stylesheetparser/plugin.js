/*
 Copyright (c) 2003-2012, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.html or http://ckeditor.com/license
*/
(function(){function e(e,t,n){var r=[],i=[],s;for(s=0;s<e.styleSheets.length;s++){var o=e.styleSheets[s];if(!(o.ownerNode||o.owningElement).getAttribute("data-cke-temp")&&(!o.href||"chrome://"!=o.href.substr(0,9)))try{for(var u=o.cssRules||o.rules,o=0;o<u.length;o++)i.push(u[o].selectorText)}catch(a){}}s=i.join(" "),s=s.replace(/(,|>|\+|~)/g," "),s=s.replace(/\[[^\]]*/g,""),s=s.replace(/#[^\s]*/g,""),s=s.replace(/\:{1,2}[^\s]*/g,""),s=s.replace(/\s+/g," "),s=s.split(" "),e=[];for(i=0;i<s.length;i++)u=s[i],n.test(u)&&!t.test(u)&&-1==CKEDITOR.tools.indexOf(e,u)&&e.push(u);for(s=0;s<e.length;s++)n=e[s].split("."),t=n[0].toLowerCase(),n=n[1],r.push({name:t+"."+n,element:t,attributes:{"class":n}});return r}CKEDITOR.plugins.add("stylesheetparser",{onLoad:function(){var t=CKEDITOR.editor.prototype;t.getStylesSet=CKEDITOR.tools.override(t.getStylesSet,function(t){return function(n){var r=this;t.call(this,function(t){n(r._.stylesDefinitions=t.concat(e(r.document.$,r.config.stylesheetParser_skipSelectors||/(^body\.|^\.)/i,r.config.stylesheetParser_validSelectors||/\w+\.\w+/)))})}})}})})();